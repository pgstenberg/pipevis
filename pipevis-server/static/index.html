<!DOCTYPE HTML>
<html>

<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src= "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script src="static/js/pipevis.app.js"></script>
<link rel="stylesheet" href="static/css/pipevis.style.css">

<body>

<div id="test" class="container pipevis_container" ng-app="pipevis" ng-controller="pipelineCtrl">

  <div class="row">
      <div class="col-lg-8">
          <div class="row">
                    <div class="page-header">
                      <h1>{{ pipeline.title }} <small>{{ pipeline.description }}</small></h1>
                    </div>
          </div>

          <div class "row">
            <div class="col-lg-12">
              <div class="pipeline_state">
                <h1 ng-if="pipeline.state == 'failed'" class="failed">failed</h1>
                <h1 ng-if="pipeline.state == 'working'" class="working">working</h1>
                <h1 ng-if="pipeline.state == 'success'" class="success">success</h1>
              </div>
            </div>
          </div>



          <div class="row">

            <div class="col-lg-{{ calc_col(pipeline.stages.length) }}" ng-repeat="stage in pipeline.stages | orderBy:'order'">
                    <ul class="list-group">

                      <li ng-if="stage.state == 'working'" class="list-group-item active"><h4 class="list-group-item-heading">{{ stage.title }}</h4></li>
                      <li ng-if="stage.state == 'pending'" class="list-group-item disabled"><h4 class="list-group-item-heading">{{ stage.title }}</h4></li>
                      <li ng-if="stage.state == 'failed'" class="list-group-item list-group-item-danger"><h4 class="list-group-item-heading">{{ stage.title }}</h4></li>
                      <li ng-if="stage.state == 'success'" class="list-group-item list-group-item-success"><h4 class="list-group-item-heading">{{ stage.title }}</h4></li>

                      <li class="list-group-item" ng-repeat="task in stage.tasks | orderBy: 'order'">
                        <ul class="list-inline">
                          {{ task.title }}

                          <li ng-if="task.state == 'success'" class="fa fa-check list-icon list-success"/>
                          <li ng-click="bool=true" ng-if="task.state == 'working'" class="fa fa-cog fa-spin list-icon"/>
                          <li ng-if="task.state == 'failed'" class="fa fa-times list-icon list-failed"/>

                        </ul>
                      </li>
                    </ul>
            </div>

          </div>
          <div class="row">
            <div class="col-lg-12">
            <div class="progress">

              <div ng-if="pipeline.state == 'working'" class="progress-bar progress-bar-striped active" role="progressbar"
              aria-valuenow="{{ pipeline.progress }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ pipeline.progress }}%">{{ pipeline.progress }}%</div>
              <div ng-if="pipeline.state == 'success'" class="progress-bar progress-bar-striped active progress-bar-success" role="progressbar"
              aria-valuenow="{{ pipeline.progress }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ pipeline.progress }}%">{{ pipeline.progress }}%</div>
              <div ng-if="pipeline.state == 'failed'" class="progress-bar progress-bar-striped active progress-bar-danger" role="progressbar"
              aria-valuenow="{{ pipeline.progress }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ pipeline.progress }}%">{{ pipeline.progress }}%</div>

            </div>
          </div>

          </div>
      </div>

      <div class="col-lg-4">
        <div class="row" ng-if="pipeline.image">
          <div class="pipeline_image">
            <img ng-src="{{ pipeline.image }}"/>
          </div>
        </div>
        <div class="row">
          <div ng-repeat="notification in pipeline.notifications | orderBy:'-order'" notification="notification">
          </div>
        </div>
      </div>

  </div>

  <footer class="footer pipevis-footer">
        <img src="static/images/logo_giphy.png"/>
  </footer>

</div>

</body>
</html>
